<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>编程规范解决方案之ESLint + Git Hooks | 叩首问路，码梦为生</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.svg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#53A8FF">
    <meta name="description" content="你好，我叫郭二蛋，欢迎你来到这里">
    <meta name="theme-color" content="#53A8FF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.6a70634b.css" as="style"><link rel="preload" href="/assets/js/app.856bad6d.js" as="script"><link rel="preload" href="/assets/js/2.6a99c285.js" as="script"><link rel="preload" href="/assets/js/3.7031cefa.js" as="script"><link rel="preload" href="/assets/js/8.396b1803.js" as="script"><link rel="prefetch" href="/assets/js/10.960a6655.js"><link rel="prefetch" href="/assets/js/11.3bde5e34.js"><link rel="prefetch" href="/assets/js/12.de934909.js"><link rel="prefetch" href="/assets/js/13.717e8502.js"><link rel="prefetch" href="/assets/js/14.0b0f6fde.js"><link rel="prefetch" href="/assets/js/15.8723ac38.js"><link rel="prefetch" href="/assets/js/16.8db0111f.js"><link rel="prefetch" href="/assets/js/17.70d1e644.js"><link rel="prefetch" href="/assets/js/18.e6853a29.js"><link rel="prefetch" href="/assets/js/19.2fd51b30.js"><link rel="prefetch" href="/assets/js/20.c72340f4.js"><link rel="prefetch" href="/assets/js/21.9d0b3d30.js"><link rel="prefetch" href="/assets/js/22.ce12d2f1.js"><link rel="prefetch" href="/assets/js/23.cfdf6604.js"><link rel="prefetch" href="/assets/js/24.6b70f8b5.js"><link rel="prefetch" href="/assets/js/25.64dd0228.js"><link rel="prefetch" href="/assets/js/26.bd137f35.js"><link rel="prefetch" href="/assets/js/27.e091a131.js"><link rel="prefetch" href="/assets/js/28.e0f88969.js"><link rel="prefetch" href="/assets/js/29.e3fdaaa2.js"><link rel="prefetch" href="/assets/js/30.115d56d0.js"><link rel="prefetch" href="/assets/js/31.0c91284c.js"><link rel="prefetch" href="/assets/js/32.f436709f.js"><link rel="prefetch" href="/assets/js/33.aec02913.js"><link rel="prefetch" href="/assets/js/34.5f0c80a1.js"><link rel="prefetch" href="/assets/js/35.6c57a5b9.js"><link rel="prefetch" href="/assets/js/36.874bc2bc.js"><link rel="prefetch" href="/assets/js/37.9d3e55d1.js"><link rel="prefetch" href="/assets/js/38.664eac9a.js"><link rel="prefetch" href="/assets/js/39.38e15cf0.js"><link rel="prefetch" href="/assets/js/4.cf227334.js"><link rel="prefetch" href="/assets/js/40.1eb39796.js"><link rel="prefetch" href="/assets/js/41.21813454.js"><link rel="prefetch" href="/assets/js/42.c366e57e.js"><link rel="prefetch" href="/assets/js/43.2ed90fb6.js"><link rel="prefetch" href="/assets/js/44.8b7ed554.js"><link rel="prefetch" href="/assets/js/45.e65eba18.js"><link rel="prefetch" href="/assets/js/46.e219420f.js"><link rel="prefetch" href="/assets/js/47.47adaa89.js"><link rel="prefetch" href="/assets/js/48.1e2c3ed7.js"><link rel="prefetch" href="/assets/js/49.430a2613.js"><link rel="prefetch" href="/assets/js/5.1f81c3e9.js"><link rel="prefetch" href="/assets/js/50.4cb51013.js"><link rel="prefetch" href="/assets/js/51.48e00036.js"><link rel="prefetch" href="/assets/js/52.2e53b9ba.js"><link rel="prefetch" href="/assets/js/53.566a6fbd.js"><link rel="prefetch" href="/assets/js/54.740bb41a.js"><link rel="prefetch" href="/assets/js/55.276e7e98.js"><link rel="prefetch" href="/assets/js/56.42aa3b98.js"><link rel="prefetch" href="/assets/js/57.5c66fa93.js"><link rel="prefetch" href="/assets/js/58.73423f17.js"><link rel="prefetch" href="/assets/js/59.e9354a5e.js"><link rel="prefetch" href="/assets/js/6.e00d9635.js"><link rel="prefetch" href="/assets/js/60.d37d1a47.js"><link rel="prefetch" href="/assets/js/61.5608bf0d.js"><link rel="prefetch" href="/assets/js/62.e318dfd6.js"><link rel="prefetch" href="/assets/js/63.74fca516.js"><link rel="prefetch" href="/assets/js/64.81eb34e4.js"><link rel="prefetch" href="/assets/js/65.ef4b9d8a.js"><link rel="prefetch" href="/assets/js/66.1ff64233.js"><link rel="prefetch" href="/assets/js/67.89044667.js"><link rel="prefetch" href="/assets/js/7.f63888e1.js"><link rel="prefetch" href="/assets/js/9.97c83bcc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6a70634b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">叩首问路，码梦为生</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study/index.html" class="nav-link">
  学习
</a></div><div class="nav-item"><a href="/question/index.html" class="nav-link">
  问题
</a></div><div class="nav-item"><a href="/document/index.html" class="nav-link">
  文档
</a></div><div class="nav-item"><a href="/read/index.html" class="nav-link">
  读书
</a></div> <a href="https://github.com/guozhaoxi/vuepressBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study/index.html" class="nav-link">
  学习
</a></div><div class="nav-item"><a href="/question/index.html" class="nav-link">
  问题
</a></div><div class="nav-item"><a href="/document/index.html" class="nav-link">
  文档
</a></div><div class="nav-item"><a href="/read/index.html" class="nav-link">
  读书
</a></div> <a href="https://github.com/guozhaoxi/vuepressBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/react/first.html" class="sidebar-link">使用antd来美化我们的界面样式</a></li><li><a href="/study/react/component.html" class="sidebar-link">React 组件</a></li><li><a href="/study/react/state.html" class="sidebar-link">玄学state</a></li><li><a href="/study/react/props.html" class="sidebar-link">props</a></li><li><a href="/study/react/lifeCycle.html" class="sidebar-link">理解lifeCycle</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/vue/first.html" class="sidebar-link">学习vue相关的笔记</a></li><li><a href="/study/vue/standard.html" aria-current="page" class="active sidebar-link">编程规范解决方案之ESLint + Git Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-01-为什么需要编程规范" class="sidebar-link">2-01：为什么需要编程规范？</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-02-使用-vue-cli-创建项目-图文" class="sidebar-link">2-02：使用 vue-cli 创建项目（图文）</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-03-升级最新的-vue-版本以支持-script-setup-语法-图文" class="sidebar-link">2-03：升级最新的 vue 版本以支持 script setup 语法（图文）</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-04-大厂编程规范一-代码检测工具-eslint-你了解多少" class="sidebar-link">2-04：大厂编程规范一：代码检测工具 ESLint 你了解多少？</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-05-大厂编程规范二-你知道代码格式化-prettier-吗" class="sidebar-link">2-05：大厂编程规范二：你知道代码格式化 Prettier 吗？</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-06-eslint-与-prettier-配合解决代码格式问题" class="sidebar-link">2-06：ESLint 与 Prettier 配合解决代码格式问题</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-07-大厂编程规范三-约定式提交规范" class="sidebar-link">2-07：大厂编程规范三：约定式提交规范</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-08-commitizen助你规范化提交代码" class="sidebar-link">2-08：Commitizen助你规范化提交代码</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-09-什么是-git-hooks" class="sidebar-link">2-09：什么是 Git Hooks</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-10-使用-husky-commitlint-检查提交描述是否符合规范要求" class="sidebar-link">2-10：使用 husky + commitlint 检查提交描述是否符合规范要求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/vue/standard.html#commitlint" class="sidebar-link">commitlint</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#husky" class="sidebar-link">husky</a></li></ul></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-11-通过-pre-commit-检测提交时代码规范" class="sidebar-link">2-11：通过 pre-commit 检测提交时代码规范</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-12-lint-staged-自动修复格式错误" class="sidebar-link">2-12：lint-staged 自动修复格式错误</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-13-关于-vetur-检测-template-的单一根元素的问题-图文" class="sidebar-link">2-13：关于 vetur 检测 template 的单一根元素的问题（图文）</a></li><li class="sidebar-sub-header"><a href="/study/vue/standard.html#_2-14-总结" class="sidebar-link">2-14：总结</a></li></ul></li><li><a href="/study/vue/login.html" class="sidebar-link">项目架构之搭建登录架构解决方案与实现</a></li><li><a href="/study/vue/layout.html" class="sidebar-link">项目架构之搭建Layout架构 解决方案与实现</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/design-mode/adapter.html" class="sidebar-link">适配器模式</a></li><li><a href="/study/design-mode/watcher.html" class="sidebar-link">观察者模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>微信小程序</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/miniprogram/first.html" class="sidebar-link">微信小程序基础用法</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="编程规范解决方案之eslint-git-hooks"><a href="#编程规范解决方案之eslint-git-hooks" class="header-anchor">#</a> 编程规范解决方案之ESLint + Git Hooks</h1> <h2 id="_2-01-为什么需要编程规范"><a href="#_2-01-为什么需要编程规范" class="header-anchor">#</a> 2-01：为什么需要编程规范？</h2> <p><strong>工欲善其事，必先利其器</strong></p> <p>对于一些大型的企业级项目而言，通常情况下我们都是需要一个团队来进行开发的。而又因为团队人员对技术理解上的参差不齐，所以就会导致出现一种情况，那就是《<strong>一个项目无法具备统一的编程规范，导致项目的代码像多个不同材质的补丁拼接起来一样</strong>》</p> <p>设想一下，下面的这段代码有一个团队进行开发，因为没有具备统一的代码标准，所以生成了下面的代码：</p> <img src="/assets/img/image-20210903190021029.d7046896.png" alt="image-20210903190021029" style="zoom:67%;"> <p>这段代码可以正常运行没有问题，但是整体的代码结构却非常的难看。</p> <blockquote><p>有的地方有空格进行分割，有的地方却没有</p> <p>有的地方是单引号，有的地方却是双引号</p> <p>有的地方有分号，有的地方没有分号</p> <p>....</p></blockquote> <p>这样的项目虽然可以正常运行，但是如果把它放到大厂的项目中，确实 <strong>不及格</strong> 的，它会被认为是 <strong>不可维护、不可扩展的代码内容</strong></p> <p>那么所谓的大厂标准的代码结构应该是什么样子的呢？</p> <p>我们把上面的代码进行一下修正，做一个对比：</p> <img src="/assets/img/image-20210903193913261.2a109850.png" alt="image-20210903193913261" style="zoom:67%;"> <p>修改之后的代码具备了统一的规范之后，是不是看起来就舒服多了！</p> <p>并且以上所列举出来的只是《编程规范》中的一小部分内容！</p> <p>那么有些同学可能就会说了，你列举出来这些编程规范有什么用啊！</p> <p>哪怕你写上一部书，我们一个团队这么多人，总不能指望所有人都看一遍，并且严格的遵守你所说的规范吧！</p> <p>说的没错！指望人主动的遵守这些规范不太现实</p> <p>那怎么办呢？</p> <p>那么我们可不可以另辟蹊径，让程序自动处理规范化的内容呢？</p> <p>答案是：可以的！</p> <p>这些也是我们本章节所需要讲解的重点内容！</p> <p>本章节中我们会为大家讲解，如何自动化的对代码进行规范，其中主要包括：</p> <ol><li>编码规范</li> <li>git 规范</li></ol> <p>两大类</p> <p>那么明确好了我们的范围之后，接下来就让我们创建一个项目，开始我们的代码规范之旅吧！</p> <h2 id="_2-02-使用-vue-cli-创建项目-图文"><a href="#_2-02-使用-vue-cli-创建项目-图文" class="header-anchor">#</a> 2-02：使用 vue-cli 创建项目（图文）</h2> <p>本章节为 <strong>图文节</strong>，请点击 [这里](./图文课程/2-02：使用 vue-cli 创建项目.md) 查看对应文档</p> <h2 id="_2-03-升级最新的-vue-版本以支持-script-setup-语法-图文"><a href="#_2-03-升级最新的-vue-版本以支持-script-setup-语法-图文" class="header-anchor">#</a> 2-03：升级最新的 vue 版本以支持 script setup 语法（图文）</h2> <p>本章节为 <strong>图文</strong>，请点击 [这里](./图文课程/2-03：升级最新的 vue 版本以支持 script setup 语法 .md) 查看对应文档</p> <h2 id="_2-04-大厂编程规范一-代码检测工具-eslint-你了解多少"><a href="#_2-04-大厂编程规范一-代码检测工具-eslint-你了解多少" class="header-anchor">#</a> 2-04：大厂编程规范一：代码检测工具 ESLint 你了解多少？</h2> <p>在我们去创建项目的时候，脚手架工具已经帮助我们安装了 <code>ESLint</code> 代码检测工具。</p> <p>对于 <code>ESLint</code> 的大名，同学们或多或少的应该都听说过，只不过有些同学可能了解的多一些，有些同学了解的少一些。</p> <p>那么本小节我们就先来聊一下，这个赫赫有名的代码检测工具 <code>ESLint</code></p> <p>首先 <code>ESLint</code> 是 <code>2013年6月</code> 创建的一个开源项目，它的目标非常简单，只有一个，那就是 <strong>提供一个插件化的 <code>javascript</code> 代码检测工具</strong> ，说白了就是做 <strong>代码格式检测使用的</strong></p> <p>在咱们当前的项目中，包含一个 <code>.eslintrc.js</code> 文件，这个文件就是 <code>eslint</code> 的配置文件。</p> <p>随着大家对代码格式的规范性越来越重视，<code>eslint</code> 也逐渐被更多的人所接收，同时也有很多大厂在原有的 <code>eslint</code> 规则基础之上进行了一些延伸。</p> <p>我们在创建项目时，就进行过这样的选择：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">?</span> Pick a linter <span class="token operator">/</span> formatter config<span class="token operator">:</span> 
  ESLint <span class="token keyword">with</span> error prevention only <span class="token comment">// 仅包含错误的 ESLint</span>
  ESLint <span class="token operator">+</span> Airbnb config <span class="token comment">// Airbnb 的 ESLint 延伸规则</span>
  ESLint <span class="token operator">+</span> Standard config <span class="token comment">// 标准的 ESLint 规则</span>
</code></pre></div><p>我们当前选择了 <strong>标准的 ESLint 规则</strong> ，那么接下来我们就在该规则之下，看一看 <code>ESLint</code> 它的一些配置都有什么？</p> <p>打开项目中的 <code>.eslintrc.js</code> 文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ESLint 配置文件遵循 commonJS 的导出规则，所导出的对象就是 ESLint 的配置对象</span>
<span class="token comment">// 文档：https://eslint.bootcss.com/docs/user-guide/configuring</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 表示当前目录即为根目录，ESLint 规则将被限制到该目录下</span>
  root<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// env 表示启用 ESLint 检测的环境</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在 node 环境下启动 ESLint 检测</span>
    node<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ESLint 中基础配置需要继承的配置</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;plugin:vue/vue3-essential&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;@vue/standard&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 解析器</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token string">&quot;babel-eslint&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 需要修改的启用规则及其各自的错误级别</span>
  <span class="token comment">/**
   * 错误级别分为三种：
   * &quot;off&quot; 或 0 - 关闭规则
   * &quot;warn&quot; 或 1 - 开启规则，使用警告级别的错误：warn (不会导致程序退出)
   * &quot;error&quot; 或 2 - 开启规则，使用错误级别的错误：error (当被触发的时候，程序会退出)
   */</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;no-console&quot;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;warn&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;no-debugger&quot;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;warn&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;off&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>那么到这里咱们已经大致的了解了<code>.eslintrc.js</code> 文件，基于 <code>ESLint</code> 如果我们出现不符合规范的代码格式时，那么就会得到一个对应的错误。</p> <p>比如：</p> <blockquote><p>我们可以把 <code>Home.vue</code> 中的 <code>name</code> 属性值，由单引号改为双引号</p></blockquote> <p>此时，只要我们一保存代码，那么就会得到一个对应的错误</p> <img src="/assets/img/image-20210904185336318.5d396afe.png" alt="image-20210904185336318" style="zoom:67%;"> <p>这个错误表示：</p> <ol><li>此时我们触发了一个 《错误级别的错误》</li> <li>触发该错误的位置是 在 <code>Home.vue</code> 的第 13 行 第九列 中</li> <li>错误描述为：字符串必须使用单引号</li> <li>错误规则为：<code>quotes</code></li></ol> <p>那么想要解决这个错误，通常情况下我们有两种方式：</p> <ol><li>按照 <code>ESLint</code> 的要求修改代码</li> <li>修改 <code>ESLint</code> 的验证规则</li></ol> <p><strong>按照 <code>ESLint</code> 的要求修改代码：</strong></p> <blockquote><p>在 <code>Home.vue</code> 的第 13 行中把双引号改为单引号</p></blockquote> <p><strong>修改 <code>ESLint</code> 的验证规则：</strong></p> <ol><li><p>在 <code>.eslintrc.js</code> 文件中，新增一条验证规则</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span> <span class="token comment">// 默认</span>
<span class="token property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;warn&quot;</span> <span class="token comment">// 修改为警告</span>
<span class="token property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span> <span class="token comment">// 修改不校验</span>
</code></pre></div></li></ol> <p>那么这一小节，我们了解了 <code>vue-cli</code> 创建 <code>vue3</code> 项目时，<code>Standard config</code> 的 <code>ESLint</code> 配置，并且知道了如何解决 <code>ESLint</code> 报错的问题。</p> <p>但是一个团队中，人员的水平高低不齐，大量的 <code>ESLint</code> 规则校验，会让很多的开发者头疼不已，从而大大影响了项目的开发进度。</p> <p>试想一下，在你去完成项目代码的同时，还需要时时刻刻注意代码的格式问题，这将是一件多么痛苦的事情！</p> <p>那么有没有什么办法，既可以保证 <code>ESLint</code> 规则校验，又可以解决严苛的格式规则导致的影响项目进度的问题呢？</p> <p>欲知后事如何，请听下一节《<code>Prettier</code> ，让你的代码变得更漂亮！》</p> <h2 id="_2-05-大厂编程规范二-你知道代码格式化-prettier-吗"><a href="#_2-05-大厂编程规范二-你知道代码格式化-prettier-吗" class="header-anchor">#</a> 2-05：大厂编程规范二：你知道代码格式化 Prettier 吗？</h2> <p>在上一小节中，我们知道了 <code>ESLint</code> 可以让我们的代码格式变得更加规范，但是同样的它也会带来开发时编码复杂度上升的问题。</p> <p>那么有没有办法既可以保证 <code>ESLint</code> 规则校验，又可以让开发者无需关注格式问题来进行顺畅的开发呢？</p> <p>答案是：有的！</p> <p>而解决这个问题的关键就是 <code>prettier</code>！（点击 <a href="https://www.prettier.cn/" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 进入 <code>prettier</code> 中文官网！）</p> <p><strong><code>prettier</code> 是什么？</strong></p> <ol><li>一个代码格式化工具</li> <li>开箱即用</li> <li>可以直接集成到 <code>VSCode</code> 之中</li> <li>在保存时，让代码直接符合 <code>ESLint</code> 标准（需要通过一些简单配置）</li></ol> <p>那么这些简单配置具体指的是什么呢？</p> <p>请看下一小节《ESLint 与 Prettier 配合解决代码格式问题》</p> <h2 id="_2-06-eslint-与-prettier-配合解决代码格式问题"><a href="#_2-06-eslint-与-prettier-配合解决代码格式问题" class="header-anchor">#</a> 2-06：ESLint 与 Prettier 配合解决代码格式问题</h2> <p>在上一小节中，我们提到《<code>prettier</code> 可以在保存代码时，让我们的代码直接符合 <code>ESLint</code> 标准》但是想要实现这样的功能需要进行一些配置。</p> <p>那么这一小节，我们就来去完成这个功能：</p> <ol><li><p>在 <code>VSCode</code> 中安装 <code>prettier</code> 插件（搜索 <code>prettier</code>），这个插件可以帮助我们在配置 <code>prettier</code> 的时候获得提示
<img src="/assets/img/image-20210904195026475.c8fbd5fb.png" alt="image-20210904195026475" style="zoom:50%;"></p></li> <li><p>在项目中新建 <code>.prettierrc</code> 文件，该文件为 <code>perttier</code> 默认配置文件</p></li> <li><p>在该文件中写入如下配置：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// 不尾随分号</span>
  <span class="token property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 使用单引号</span>
  <span class="token property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// 多行逗号分割的语法中，最后一行不加逗号</span>
  <span class="token property">&quot;trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>打开 <code>VSCode</code> 《设置面板》
<img src="/assets/img/image-20210904200638072.17bdae3d.png" alt="image-20210904200638072" style="zoom:67%;"></p></li> <li><p>在设置中，搜索 <code>save</code> ，勾选 <code>Format On Save</code> <img src="/assets/img/image-20210904200738067.382034b4.png" alt="image-20210904200738067" style="zoom:67%;"></p></li></ol> <p>至此，你即可在 <strong><code>VSCode</code> 保存时，自动格式化代码！</strong></p> <p><strong>但是！</strong> 你只做到这样还不够！</p> <blockquote><ol><li><p>VSCode 而言，默认一个 tab 等于 4 个空格，而 ESLint 希望一个 tab 为两个空格</p></li> <li><p>如果大家的 VSCode 安装了多个代码格式化工具的化</p></li> <li><p>ESLint 和 prettier 之间的冲突问题</p></li></ol></blockquote> <p>我们尝试在 <code>Home.vue</code> 中写入一个 <code>created</code> 方法，写入完成之后，打开我们的控制台我们会发现，此时代码抛出了一个 <code>ESLint</code> 的错误</p> <img src="/assets/img/image-20210904201057594.65d51534.png" alt="image-20210904201057594" style="zoom:67%;"> <p>这个错误的意思是说：<strong><code>created</code> 这个方法名和后面的小括号之间，应该有一个空格！</strong></p> <p>但是当我们加入了这个空格之后，只要一保存代码，就会发现 <code>prettier</code> 会自动帮助我们去除掉这个空格。</p> <p>那么此时的这个问题就是 <code>prettier</code> 和 <code>ESLint</code> 的冲突问题。</p> <p>针对于这个问题我们想要解决也非常简单：</p> <ol><li><p>打开 <code>.eslintrc.js</code> 配置文件</p></li> <li><p>在 <code>rules</code> 规则下，新增一条规则</p> <div class="language-json extra-class"><pre class="language-json"><code>'space-before-function-paren'<span class="token operator">:</span> 'off'
</code></pre></div></li> <li><p>该规则表示关闭《方法名后增加空格》的规则</p></li> <li><p>重启项目</p></li></ol> <p>至此我们整个的 <code>perttier</code> 和 <code>ESLint</code> 的配合使用就算是全部完成了。</p> <p>在之后我们写代码的过程中，只需要保存代码，那么 <code>perttier</code> 就会帮助我们自动格式化代码，使其符合 <code>ESLint</code> 的校验规则。而无需我们手动进行更改了。</p> <h2 id="_2-07-大厂编程规范三-约定式提交规范"><a href="#_2-07-大厂编程规范三-约定式提交规范" class="header-anchor">#</a> 2-07：大厂编程规范三：约定式提交规范</h2> <p>在前面我们通过 <code>prettier + ESLint</code> 解决了代码格式的问题，但是我们之前也说过 <strong>编程规范</strong> 指的可不仅仅只是 <strong>代码格式规范</strong> 。</p> <p>除了 <strong>代码格式规范</strong> 之外，还有另外一个很重要的规范就是 <strong><code>git</code> 提交规范！</strong></p> <p>在现在的项目开发中，通常情况下，我们都会通过 <code>git</code> 来管理项目。只要通过 <code>git</code> 来管理项目，那么就必然会遇到使用 <code>git</code> 提交代码的场景</p> <p>当我们执行 <code>git commit -m &quot;描述信息&quot;</code> 的时候，我们知道此时必须添加一个描述信息。但是中华文化博大精深，不同的人去填写描述信息的时候，都会根据自己的理解来进行描述。</p> <p>而很多人的描述 “天马行空” ，这样就会导致别人在看你的提交记录时，看不懂你说的什么意思？不知道你当前的这次提交到底做了什么事情？会不会存在潜在的风险？</p> <p>比如说，我们来看这几条提交记录：</p> <p>![image-20210904203051754](第二章：标准化大厂编程规范解决方案之ESLint + Git Hooks .assets/image-20210904203051754.png)</p> <p>你能够想象得到它们经历了什么吗？</p> <p>所以 <strong><code>git</code> 提交规范</strong> 势在必行。</p> <p>对于 <strong><code>git</code> 提交规范</strong> 来说，不同的团队可能会有不同的标准，那么咱们今天就以目前使用较多的 <a href="https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines" target="_blank" rel="noopener noreferrer">Angular团队规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 延伸出的 <a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">Conventional Commits specification（约定式提交）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 为例，来为大家详解  <strong><code>git</code> 提交规范</strong></p> <p>约定式提交规范要求如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token punctuation">[</span>optional scope<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>

<span class="token punctuation">[</span>optional body<span class="token punctuation">]</span>

<span class="token punctuation">[</span>optional <span class="token function">footer</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  翻译 <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
    
<span class="token operator">&lt;</span>类型<span class="token operator">&gt;</span><span class="token punctuation">[</span>可选 范围<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token operator">&lt;</span>描述<span class="token operator">&gt;</span>

<span class="token punctuation">[</span>可选 正文<span class="token punctuation">]</span>

<span class="token punctuation">[</span>可选 脚注<span class="token punctuation">]</span>
</code></pre></div><p>其中 <code>&lt;type&gt;</code> 类型，必须是一个可选的值，比如：</p> <ol><li>新功能：<code>feat</code></li> <li>修复：<code>fix</code></li> <li>文档变更：<code>docs</code></li> <li>....</li></ol> <p>也就是说，如果要按照 <strong>约定式提交规范</strong> 来去做的化，那么你的一次提交描述应该式这个样子的：</p> <img src="data:image/png;base64,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" alt="image-20210904205519762"> <p>我想大家看到这样的一个提交描述之后，心里的感觉应该和我一样是崩溃的！要是每次都这么写，写到猴年马月了！</p> <p>如果你有这样的困惑，那么 ”恭喜你“ ，接下来我们将一起解决这个问题！</p> <p>欲知后事如何，请看下一节《Commitizen助你规范化提交代码》</p> <h2 id="_2-08-commitizen助你规范化提交代码"><a href="#_2-08-commitizen助你规范化提交代码" class="header-anchor">#</a> 2-08：Commitizen助你规范化提交代码</h2> <p>在上一小节我们讲述了 <a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">约定式提交规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，我们知道如果严格安装 <strong>约定式提交规范</strong>， 来手动进行代码提交的话，那么是一件非常痛苦的事情，但是 <strong>git 提交规范的处理</strong> 又势在必行，那么怎么办呢？</p> <p>你遇到的问题，也是其他人所遇到的！</p> <p>经过了很多人的冥思苦想，就出现了一种叫做 <strong>git 提交规范化工具</strong> 的东西，而我们要学习的 <code>commitizen</code> 就是其中的佼佼者！</p> <p><code>commitizen</code> 仓库名为 <a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">cz-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，它提供了一个 <code>git cz</code> 的指令用于代替 <code>git commit</code>，简单一句话介绍它：</p> <blockquote><p>当你使用 <code>commitizen</code> 进行代码提交（git commit）时，<code>commitizen</code> 会提交你在提交时填写所有必需的提交字段！</p></blockquote> <p>这句话怎么解释呢？不用着急，下面我们就来安装并且使用一下 <code>commitizen</code> ，使用完成之后你自然就明白了这句话的意思！</p> <ol><li><p>全局安装<code>Commitizen</code></p> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">-</span>g commitizen@<span class="token number">4.2</span><span class="token number">.4</span>
</code></pre></div></li> <li><p>安装并配置 <code>cz-customizable</code> 插件</p> <ol><li><p>使用 <code>npm</code> 下载 <code>cz-customizable</code></p> <div class="language-node extra-class"><pre class="language-text"><code>npm i cz-customizable@6.3.0 --save-dev
</code></pre></div></li> <li><p>添加以下配置到 <code>package.json</code> 中</p> <div class="language-json extra-class"><pre class="language-json"><code>...
  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/cz-customizable&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div></li></ol></li> <li><p>项目根目录下创建 <code>.cz-config.js</code> 自定义提示文件</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可选类型</span>
  types<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'feat'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'feat:     新功能'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'fix'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'fix:      修复'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'docs'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'docs:     文档变更'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'style'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'style:    代码格式(不影响代码运行的变动)'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      value<span class="token operator">:</span> <span class="token string">'refactor'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'refactor: 重构(既不是增加feature，也不是修复bug)'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'perf'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'perf:     性能优化'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'test:     增加测试'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'chore'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'chore:    构建过程或辅助工具的变动'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'revert'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'revert:   回退'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'build'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'build:    打包'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 消息步骤</span>
  messages<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'请选择提交类型:'</span><span class="token punctuation">,</span>
    customScope<span class="token operator">:</span> <span class="token string">'请输入修改范围(可选):'</span><span class="token punctuation">,</span>
    subject<span class="token operator">:</span> <span class="token string">'请简要描述提交(必填):'</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token string">'请输入详细描述(可选):'</span><span class="token punctuation">,</span>
    footer<span class="token operator">:</span> <span class="token string">'请输入要关闭的issue(可选):'</span><span class="token punctuation">,</span>
    confirmCommit<span class="token operator">:</span> <span class="token string">'确认使用以上信息提交？(y/n/e/h)'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 跳过问题</span>
  skipQuestions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token string">'footer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// subject文字长度默认是72</span>
  subjectLimit<span class="token operator">:</span> <span class="token number">72</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>使用 <code>git cz</code> 代替 <code>git commit</code>
使用 <code>git cz</code> 代替 <code>git commit</code>，即可看到提示内容</p></li></ol> <p>那么到这里我们就已经可以使用<code>git cz</code> 来代替了 <code>git commit</code> 实现了规范化的提交诉求了，但是当前依然存在着一个问题，那就是我们必须要通过 <code>git cz</code> 指令才可以完成规范化提交！</p> <p>那么如果有马虎的同事，它们忘记了使用 <code>git cz</code> 指令，直接就提交了怎么办呢？</p> <p>那么有没有方式来限制这种错误的出现呢？</p> <p>答案是有的！</p> <p>下一节我们来看 《什么是 Git Hooks》</p> <h2 id="_2-09-什么是-git-hooks"><a href="#_2-09-什么是-git-hooks" class="header-anchor">#</a> 2-09：什么是 Git Hooks</h2> <p>上一小节中我们使用了 <code>git cz</code> 来代替了 <code>git commit</code> 实现了规范化的提交诉求，但是依然存在着有人会忘记使用的问题。</p> <p>那么这一小节我们就来看一下这样的问题，我们应该如何去进行解决。</p> <p>先来明确一下我们最终要实现的效果：</p> <blockquote><p>我们希望：</p> <p>当《提交描述信息》不符合 <a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">约定式提交规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的时候，阻止当前的提交，并抛出对应的错误提示</p></blockquote> <p>而要实现这个目的，我们就需要先来了解一个概念，叫做 <code>Git hooks（git 钩子 || git 回调方法）</code></p> <p>也就是：<strong><code>git</code> 在执行某个事件之前或之后进行一些其他额外的操作</strong></p> <p>而我们所期望的 <strong>阻止不合规的提交消息</strong>，那么就需要使用到 <code>hooks</code> 的钩子函数。</p> <p>下面是我整理出来的所有的 <code>hooks</code> ，大家可以进行一下参考，其中加粗的是常用到的 <code>hooks</code>：</p> <table><thead><tr><th style="text-align:left;">Git Hook</th> <th>调用时机</th> <th>说明</th></tr></thead> <tbody><tr><td style="text-align:left;">pre-applypatch</td> <td><code>git am</code>执行前</td> <td></td></tr> <tr><td style="text-align:left;">applypatch-msg</td> <td><code>git am</code>执行前</td> <td></td></tr> <tr><td style="text-align:left;">post-applypatch</td> <td><code>git am</code>执行后</td> <td>不影响<code>git am</code>的结果</td></tr> <tr><td style="text-align:left;"><strong>pre-commit</strong></td> <td><code>git commit</code>执行前</td> <td>可以用<code>git commit --no-verify</code>绕过</td></tr> <tr><td style="text-align:left;"><strong>commit-msg</strong></td> <td><code>git commit</code>执行前</td> <td>可以用<code>git commit --no-verify</code>绕过</td></tr> <tr><td style="text-align:left;">post-commit</td> <td><code>git commit</code>执行后</td> <td>不影响<code>git commit</code>的结果</td></tr> <tr><td style="text-align:left;">pre-merge-commit</td> <td><code>git merge</code>执行前</td> <td>可以用<code>git merge --no-verify</code>绕过。</td></tr> <tr><td style="text-align:left;">prepare-commit-msg</td> <td><code>git commit</code>执行后，编辑器打开之前</td> <td></td></tr> <tr><td style="text-align:left;">pre-rebase</td> <td><code>git rebase</code>执行前</td> <td></td></tr> <tr><td style="text-align:left;">post-checkout</td> <td><code>git checkout</code>或<code>git switch</code>执行后</td> <td>如果不使用<code>--no-checkout</code>参数，则在<code>git clone</code>之后也会执行。</td></tr> <tr><td style="text-align:left;">post-merge</td> <td><code>git commit</code>执行后</td> <td>在执行<code>git pull</code>时也会被调用</td></tr> <tr><td style="text-align:left;">pre-push</td> <td><code>git push</code>执行前</td> <td></td></tr> <tr><td style="text-align:left;">pre-receive</td> <td><code>git-receive-pack</code>执行前</td> <td></td></tr> <tr><td style="text-align:left;">update</td> <td></td> <td></td></tr> <tr><td style="text-align:left;">post-receive</td> <td><code>git-receive-pack</code>执行后</td> <td>不影响<code>git-receive-pack</code>的结果</td></tr> <tr><td style="text-align:left;">post-update</td> <td>当 <code>git-receive-pack</code>对 <code>git push</code> 作出反应并更新仓库中的引用时</td> <td></td></tr> <tr><td style="text-align:left;">push-to-checkout</td> <td>当``git-receive-pack<code>对</code>git push<code>做出反应并更新仓库中的引用时，以及当推送试图更新当前被签出的分支且</code>receive.denyCurrentBranch<code>配置被设置为</code>updateInstead`时</td> <td></td></tr> <tr><td style="text-align:left;">pre-auto-gc</td> <td><code>git gc --auto</code>执行前</td> <td></td></tr> <tr><td style="text-align:left;">post-rewrite</td> <td>执行<code>git commit --amend</code>或<code>git rebase</code>时</td> <td></td></tr> <tr><td style="text-align:left;">sendemail-validate</td> <td><code>git send-email</code>执行前</td> <td></td></tr> <tr><td style="text-align:left;">fsmonitor-watchman</td> <td>配置<code>core.fsmonitor</code>被设置为<code>.git/hooks/fsmonitor-watchman</code>或<code>.git/hooks/fsmonitor-watchmanv2</code>时</td> <td></td></tr> <tr><td style="text-align:left;">p4-pre-submit</td> <td><code>git-p4 submit</code>执行前</td> <td>可以用<code>git-p4 submit --no-verify</code>绕过</td></tr> <tr><td style="text-align:left;">p4-prepare-changelist</td> <td><code>git-p4 submit</code>执行后，编辑器启动前</td> <td>可以用<code>git-p4 submit --no-verify</code>绕过</td></tr> <tr><td style="text-align:left;">p4-changelist</td> <td><code>git-p4 submit</code>执行并编辑完<code>changelist message</code>后</td> <td>可以用<code>git-p4 submit --no-verify</code>绕过</td></tr> <tr><td style="text-align:left;">p4-post-changelist</td> <td><code>git-p4 submit</code>执行后</td> <td></td></tr> <tr><td style="text-align:left;">post-index-change</td> <td>索引被写入到<code>read-cache.c do_write_locked_index</code>后</td> <td></td></tr></tbody></table> <p>PS：详细的 <code>HOOKS介绍</code> 可点击<a href="https://git-scm.com/docs/githooks" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>查看</p> <p>整体的 <code>hooks</code> 非常多，当时我们其中用的比较多的其实只有两个：</p> <table><thead><tr><th style="text-align:left;">Git Hook</th> <th>调用时机</th> <th>说明</th></tr></thead> <tbody><tr><td style="text-align:left;"><strong>pre-commit</strong></td> <td><code>git commit</code>执行前<br>它不接受任何参数，并且在获取提交日志消息并进行提交之前被调用。脚本<code>git commit</code>以非零状态退出会导致命令在创建提交之前中止。</td> <td>可以用<code>git commit --no-verify</code>绕过</td></tr> <tr><td style="text-align:left;"><strong>commit-msg</strong></td> <td><code>git commit</code>执行前<br>可用于将消息规范化为某种项目标准格式。<br>还可用于在检查消息文件后拒绝提交。</td> <td>可以用<code>git commit --no-verify</code>绕过</td></tr></tbody></table> <p>简单来说这两个钩子：</p> <ol><li><code>commit-msg</code>：可以用来规范化标准格式，并且可以按需指定是否要拒绝本次提交</li> <li><code>pre-commit</code>：会在提交前被调用，并且可以按需指定是否要拒绝本次提交</li></ol> <p>而我们接下来要做的关键，就在这两个钩子上面。</p> <h2 id="_2-10-使用-husky-commitlint-检查提交描述是否符合规范要求"><a href="#_2-10-使用-husky-commitlint-检查提交描述是否符合规范要求" class="header-anchor">#</a> 2-10：使用 husky + commitlint 检查提交描述是否符合规范要求</h2> <p>在上一小节中，我们了解了 <code>git hooks</code> 的概念，那么接下来我们就使用 <code>git hooks</code> 来去校验我们的提交信息。</p> <p>要完成这么个目标，那么我们需要使用两个工具：</p> <ol><li><p><a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commitlint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：用于检查提交信息</p></li> <li><p><a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：是<code>git hooks</code>工具</p></li></ol> <p>注意：<strong><code>npm</code> 需要在 7.x 以上版本！！！！！</strong></p> <p>那么下面我们分别来去安装一下这两个工具：</p> <h3 id="commitlint"><a href="#commitlint" class="header-anchor">#</a> commitlint</h3> <ol><li><p>安装依赖：</p> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev @commitlint/config-conventional@12.1.4 @commitlint/cli@12.1.4
</code></pre></div></li> <li><p>创建 <code>commitlint.config.js</code> 文件</p> <div class="language- extra-class"><pre class="language-text"><code>echo &quot;module.exports = {extends: ['@commitlint/config-conventional']}&quot; &gt; commitlint.config.js
</code></pre></div></li> <li><p>打开 <code>commitlint.config.js</code> ， 增加配置项（ <a href="https://github.com/conventional-changelog/commitlint/blob/master/@commitlint/config-conventional/index.js" target="_blank" rel="noopener noreferrer">config-conventional 默认配置点击可查看<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ）：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 继承的规则</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 定义规则类型</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// type 类型定义，表示 git 提交的 type 必须在以下类型范围内</span>
    <span class="token string">'type-enum'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token string">'always'</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span>
        <span class="token string">'feat'</span><span class="token punctuation">,</span> <span class="token comment">// 新功能 feature</span>
        <span class="token string">'fix'</span><span class="token punctuation">,</span> <span class="token comment">// 修复 bug</span>
        <span class="token string">'docs'</span><span class="token punctuation">,</span> <span class="token comment">// 文档注释</span>
        <span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token comment">// 代码格式(不影响代码运行的变动)</span>
        <span class="token string">'refactor'</span><span class="token punctuation">,</span> <span class="token comment">// 重构(既不增加新功能，也不是修复bug)</span>
        <span class="token string">'perf'</span><span class="token punctuation">,</span> <span class="token comment">// 性能优化</span>
        <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token comment">// 增加测试</span>
        <span class="token string">'chore'</span><span class="token punctuation">,</span> <span class="token comment">// 构建过程或辅助工具的变动</span>
        <span class="token string">'revert'</span><span class="token punctuation">,</span> <span class="token comment">// 回退</span>
        <span class="token string">'build'</span> <span class="token comment">// 打包</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// subject 大小写不做校验</span>
    <span class="token string">'subject-case'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></li></ol> <p><strong>注意：确保保存为 <code>UTF-8</code> 的编码格式</strong>，否则可能会出现以下错误：</p> <p>![image-20210710121456416](第二章：标准化大厂编程规范解决方案之ESLint + Git Hooks .assets/image-20210710121456416.png)</p> <p>接下来我们来安装 <code>husky</code></p> <h3 id="husky"><a href="#husky" class="header-anchor">#</a> husky</h3> <ol><li><p>安装依赖：</p> <div class="language- extra-class"><pre class="language-text"><code>npm install husky@7.0.1 --save-dev
</code></pre></div></li> <li><p>启动 <code>hooks</code> ， 生成 <code>.husky</code> 文件夹</p> <div class="language- extra-class"><pre class="language-text"><code>npx husky install
</code></pre></div><p>![image-20210906202034156](第二章：标准化大厂编程规范解决方案之ESLint + Git Hooks .assets/image-20210906202034156.png)</p></li> <li><p>在 <code>package.json</code> 中生成 <code>prepare</code> 指令（ <strong>需要 npm &gt; 7.0 版本</strong> ）</p> <div class="language- extra-class"><pre class="language-text"><code>npm set-script prepare &quot;husky install&quot;
</code></pre></div><img src="/assets/img/image-20210906202128323.54786b8b.png" alt="image-20210906202128323" style="zoom:50%;"></li> <li><p>执行 <code>prepare</code> 指令</p> <div class="language- extra-class"><pre class="language-text"><code>npm run prepare
</code></pre></div></li> <li><p>执行成功，提示
<img src="data:image/png;base64,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" alt="image-20210710120053221" style="zoom:80%;"></p></li> <li><p>添加 <code>commitlint</code> 的 <code>hook</code> 到 <code>husky</code>中，并指令在 <code>commit-msg</code> 的 <code>hooks</code> 下执行 <code>npx --no-install commitlint --edit &quot;$1&quot;</code> 指令</p> <div class="language- extra-class"><pre class="language-text"><code>npx husky add .husky/commit-msg 'npx --no-install commitlint --edit &quot;$1&quot;'
</code></pre></div></li> <li><p>此时的 <code>.husky</code> 的文件结构
![image-20210710120228931]( 第二章：标准化大厂编程规范解决方案之ESLint + Git Hooks .assets/image-20210710120228931.png)</p></li></ol> <p>至此， 不符合规范的 commit 将不再可提交：</p> <div class="language- extra-class"><pre class="language-text"><code>PS F:\xxxxxxxxxxxxxxxxxxxxx\imooc-admin&gt; git commit -m &quot;测试&quot;
⧗   input: 测试
✖   subject may not be empty [subject-empty]
✖   type may not be empty [type-empty]

✖   found 2 problems, 0 warnings
ⓘ   Get help: https://github.com/conventional-changelog/commitlint/#what-is-commitlint

husky - commit-msg hook exited with code 1 (error)
</code></pre></div><p>那么至此，我们就已经可以处理好了 <strong>强制规范化的提交要求</strong>，到现在 <strong>不符合规范的提交信息，将不可在被提交！</strong></p> <p>那么到这里我们的 <strong>规范化目标</strong> 就完成了吗？</p> <p>当然没有！</p> <p>现在我们还缺少一个 <strong>规范化的处理</strong> ，那就是 <strong>代码格式提交规范处理！</strong></p> <p>有同学看到这里可能说，咦！ 这个怎么看着这么眼熟啊？这个事情我们之前不是做过了吗？还需要在处理什么？</p> <p>欲知后事如何，请看下一节《通过 pre-commit 处理提交时代码规范》</p> <h2 id="_2-11-通过-pre-commit-检测提交时代码规范"><a href="#_2-11-通过-pre-commit-检测提交时代码规范" class="header-anchor">#</a> 2-11：通过 pre-commit 检测提交时代码规范</h2> <p>在 <strong><code>ESLint</code> 与 <code>Prettier</code> 配合解决代码格式问题</strong> 的章节中，我们讲解了如何处理 <strong>本地！代码格式问题。</strong></p> <p>但是这样的一个格式处理问题，他只能够在本地进行处理，并且我们还需要 <strong>手动在  <code>VSCode</code> 中配置自动保存</strong> 才可以。那么这样就会存在一个问题，要是有人忘记配置这个东西了怎么办呢？他把代码写的乱七八糟的直接就提交了怎么办呢？</p> <p>所以我们就需要有一种方式来规避这种风险。</p> <p>那么想要完成这么一个操作就需要使用 <code>husky</code> 配合 <code>eslint</code> 才可以实现。</p> <p>我们期望通过 <strong><code>husky</code> 监测 <code>pre-commit</code> 钩子，在该钩子下执行 <code>npx eslint --ext .js,.vue src</code></strong> 指令来去进行相关检测：</p> <ol><li><p>执行 <code>npx husky add .husky/pre-commit &quot;npx eslint --ext .js,.vue src&quot;</code> 添加 <code>commit</code> 时的 <code>hook</code> （<code>npx eslint --ext .js,.vue src</code> 会在执行到该 hook 时运行）</p></li> <li><p>该操作会生成对应文件 <code>pre-commit</code>：
![image-20210906204043915](第二章：标准化大厂编程规范解决方案之ESLint + Git Hooks .assets/image-20210906204043915.png)</p></li> <li><p>关闭 <code>VSCode</code> 的自动保存操作</p></li> <li><p>修改一处代码，使其不符合 <code>ESLint</code> 校验规则</p></li> <li><p>执行 <strong>提交操作</strong> 会发现，抛出一系列的错误，代码无法提交</p> <div class="language- extra-class"><pre class="language-text"><code>PS F:\xxxxxxxxxxxxxxxxxxx\imooc-admin&gt; git commit -m 'test'

F:\xxxxxxxxxxxxxxxx\imooc-admin\src\views\Home.vue
  13:9  error  Strings must use singlequote  quotes

✖ 1 problem (1 error, 0 warnings)
  1 error and 0 warnings potentially fixable with the `--fix` option.

husky - pre-commit hook exited with code 1 (error)
</code></pre></div></li> <li><p>想要提交代码，必须处理完成所有的错误信息</p></li></ol> <p>那么到这里位置，我们已经通过 <code>pre-commit</code> 检测到了代码的提交规范问题。</p> <p>那么到这里就万事大吉了吗？</p> <p>在这个世界上从来不缺的就是懒人，错误的代码格式可能会抛出很多的 <code>ESLint</code> 错误，让人看得头皮发麻。严重影响程序猿的幸福指数。</p> <p>那么有没有办法，让程序猿在 0 配置的前提下，哪怕代码格式再乱，也可以 <strong>”自动“</strong> 帮助他修复对应的问题，并且完成提交呢？</p> <p>你别说，还真有！</p> <p>那么咱们来看下一节《lint-staged 自动修复格式错误》</p> <h2 id="_2-12-lint-staged-自动修复格式错误"><a href="#_2-12-lint-staged-自动修复格式错误" class="header-anchor">#</a> 2-12：lint-staged 自动修复格式错误</h2> <p>在上一章中我们通过 <code>pre-commit</code> 处理了 <strong>检测代码的提交规范问题，当我们进行代码提交时，会检测所有的代码格式规范</strong> 。</p> <p>但是这样会存在两个问题：</p> <ol><li>我们只修改了个别的文件，没有必要检测所有的文件代码格式</li> <li>它只能给我们提示出对应的错误，我们还需要手动的进行代码修改</li></ol> <p>那么这一小节，我们就需要处理这两个问题</p> <p>那么想要处理这两个问题，就需要使用另外一个插件 <a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ！</p> <p><a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可以让你当前的代码检查 <strong>只检查本次修改更新的代码，并在出现错误的时候，自动修复并且推送</strong></p> <p><a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 无需单独安装，我们生成项目时，<code>vue-cli</code> 已经帮助我们安装过了，所以我们直接使用就可以了</p> <ol><li><p>修改 <code>package.json</code> 配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;src/**/*.{js,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;eslint --fix&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;git add&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>如上配置，每次它只会在你本地 <code>commit</code> 之前，校验你提交的内容是否符合你本地配置的 <code>eslint</code>规则(这个见文档 <a href="https://panjiachen.github.io/vue-element-admin-site/zh/guide/advanced/eslint.html" target="_blank" rel="noopener noreferrer">ESLint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> )，校验会出现两种结果：</p> <ol><li>如果符合规则：则会提交成功。</li> <li>如果不符合规则：它会自动执行 <code>eslint --fix</code> 尝试帮你自动修复，如果修复成功则会帮你把修复好的代码提交，如果失败，则会提示你错误，让你修好这个错误之后才能允许你提交代码。</li></ol></li> <li><p>修改 <code>.husky/pre-commit</code> 文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token hashbang comment">#!/bin/sh</span>
<span class="token punctuation">.</span> <span class="token string">&quot;$(dirname &quot;</span>$<span class="token number">0</span><span class="token string">&quot;)/_/husky.sh&quot;</span>

npx lint<span class="token operator">-</span>staged

</code></pre></div></li> <li><p>再次执行提交代码</p></li> <li><p>发现 <strong>暂存区中</strong> 不符合 <code>ESlint</code> 的内容，被自动修复</p></li></ol> <h2 id="_2-13-关于-vetur-检测-template-的单一根元素的问题-图文"><a href="#_2-13-关于-vetur-检测-template-的单一根元素的问题-图文" class="header-anchor">#</a> 2-13：关于 <code>vetur</code> 检测 <code>template</code> 的单一根元素的问题（图文）</h2> <p>本章节为 <strong>图文</strong>，请点击 [这里](./图文课程/2-13：关于vetur检测 template的单一根元素的问题.md) 查看对应文档</p> <h2 id="_2-14-总结"><a href="#_2-14-总结" class="header-anchor">#</a> 2-14：总结</h2> <p>本章中我们处理了 <strong>编程格式规范的问题</strong>，整个规范大体可以分为两大类：</p> <ol><li>代码格式规范</li> <li><code>git</code> 提交规范</li></ol> <p><strong>代码格式规范：</strong></p> <p>对于 <strong>代码格式规范</strong> 而言，我们通过 <code>ESLint</code> + <code>Prettier</code> + <code>VSCode 配置</code> 配合进行了处理。</p> <p>最终达到了在保存代码时，自动规范化代码格式的目的。</p> <p><strong><code>git</code> 提交规范：</strong></p> <p>对于 <strong><code>git</code> 提交规范</strong> 而言我们使用了 <code>husky</code> 来监测 <code>Git hooks</code> 钩子，并且通过以下插件完成了对应的配置：</p> <ol><li><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">约定式提交规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">commitizen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：git 提交规范化工具</li> <li><a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commitlint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：用于检查提交信息</li> <li><code>pre-commit</code>： <code>git hooks</code> 钩子</li> <li><a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：只检查本次修改更新的代码，并在出现错误的时候，自动修复并且推送</li></ol> <p>那么处理完成这些规范操作之后，在下一章我们将会正式进入到咱们的项目开发之中！</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/guozhaoxi/edit/master/docs/study/vue/standard.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study/vue/first.html" class="prev">
        学习vue相关的笔记
      </a></span> <span class="next"><a href="/study/vue/login.html">
        项目架构之搭建登录架构解决方案与实现
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.856bad6d.js" defer></script><script src="/assets/js/2.6a99c285.js" defer></script><script src="/assets/js/3.7031cefa.js" defer></script><script src="/assets/js/8.396b1803.js" defer></script>
  </body>
</html>
